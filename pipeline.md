
## –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞:

### 1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Pipeline**
- **Developer** –¥–µ–ª–∞–µ—Ç `git push` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- **GitLab** –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Ñ–∞–π–ª `.gitlab-ci.yml`
- –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π **Pipeline** —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è **stages** –∏ —Å–æ–∑–¥–∞—é—Ç—Å—è **jobs**

### 2. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ **job** –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–¥—Ö–æ–¥—è—â–∏–π **Runner**
- **Runner** –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
  - –°–∫–∞—á–∏–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π **Docker image**
  - –ö–ª–æ–Ω–∏—Ä—É–µ—Ç –∫–æ–¥ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
  - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç **cache** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

### 3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤**
#### Stage 1: Build
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **before_script**
- –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã **script**
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **artifacts** (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–±–æ—Ä–∫–∏)
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **cache**

#### Stage 2: Test 
- –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è **services** (–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, Redis)
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è **artifacts** –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ stage
- –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–µ—Å—Ç—ã
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ—Ç—á–µ—Ç—ã –≤ GitLab

#### Stage 3: Deploy
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–µ–ø–ª–æ–π –Ω–∞ —Ü–µ–ª–µ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å **environment** –≤ GitLab

### 4. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Pipeline**
- **Runner** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ **GitLab**
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å **Pipeline**
- –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è **Developer**

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- **Runner** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è jobs
- **Cache** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏  
- **Artifacts** - –ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ –º–µ–∂–¥—É stages
- **Services** - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **Environment** - —Ü–µ–ª–µ–≤—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è



```mermaid
sequenceDiagram
    participant D as Developer
    participant G as GitLab Server
    participant R as GitLab Runner
    participant C as Cache Storage
    participant S as Services (DB, Redis)
    participant E as External Environment

    Note over D,G: 1. –¢—Ä–∏–≥–≥–µ—Ä Pipeline
    D->>G: git push / Merge Request
    G->>G: –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç .gitlab-ci.yml
    G->>G: –°–æ–∑–¥–∞–µ—Ç Pipeline (ID: $CI_PIPELINE_ID)
    G->>G: –ü–∞—Ä—Å–∏—Ç stages: build, test, deploy

    Note over G,R: 2. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    G->>R: –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ job (build)
    R->>R: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    R->>R: Pull docker image (node:16)
    R->>G: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
    R->>C: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ cache (node_modules)

    Note over R,R: 3. –≠—Ç–∞–ø BUILD
    R->>R: –í—ã–ø–æ–ª–Ω—è–µ—Ç before_script (npm install)
    R->>R: –í—ã–ø–æ–ª–Ω—è–µ—Ç script (npm run build)
    R->>R: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç artifacts (dist/)
    R->>C: –û–±–Ω–æ–≤–ª—è–µ—Ç cache
    R->>G: ‚úÖ Job build —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω

    G->>R: –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ job (test)
    R->>R: Pull docker image (node:16)
    R->>G: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
    R->>S: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ (PostgreSQL, Redis)
    
    Note over R,R: 4. –≠—Ç–∞–ø TEST
    R->>R: –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç artifacts –∏–∑ build
    R->>R: –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–µ—Å—Ç—ã (npm test)
    R->>S: –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –∏ Redis
    R->>G: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Ç—á–µ—Ç—ã (junit.xml)
    R->>S: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã
    R->>G: ‚úÖ Job test —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω

    G->>R: –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ job (deploy)
    R->>R: Pull docker image (alpine)
    
    Note over R,E: 5. –≠—Ç–∞–ø DEPLOY
    R->>E: SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
    R->>E: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (rsync/scp)
    R->>E: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (docker-compose up)
    E->>R: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
    R->>G: ‚úÖ Job deploy —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω
    R->>G: –û–±–Ω–æ–≤–ª—è–µ—Ç environment status

    Note over G,D: 6. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Pipeline
    G->>G: –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å Pipeline: ‚úÖ SUCCESS
    G->>D: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: Pipeline passed
    G->>D: –û—Ç—á–µ—Ç –≤ Merge Request
    G->>D: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```

```mermaid
flowchart TB
    A[üöÄ Developer: git push] --> B{GitLab Server}
    
    subgraph B [GitLab CI/CD Pipeline]
        C[–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ .gitlab-ci.yml] --> D[–°–æ–∑–¥–∞–Ω–∏–µ Pipeline]
        D --> E[–ê–Ω–∞–ª–∏–∑ stages]
        E --> F[–°–æ–∑–¥–∞–Ω–∏–µ jobs queue]
    end
    
    subgraph G [Stage 1: BUILD]
        direction TB
        G1[Job: build] --> G2[üì¶ Docker: node:16]
        G2 --> G3[‚ö° –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ cache]
        G3 --> G4[üõ†Ô∏è npm install & build]
        G4 --> G5[üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ artifacts]
    end
    
    subgraph H [Stage 2: TEST]
        direction TB
        H1[Job: test] --> H2[üì¶ Docker: node:16]
        H2 --> H3[üêò –ó–∞–ø—É—Å–∫ PostgreSQL]
        H3 --> H4[üî¥ –ó–∞–ø—É—Å–∫ Redis]
        H4 --> H5[üì• –ó–∞–≥—Ä—É–∑–∫–∞ artifacts]
        H5 --> H6[üß™ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤]
        H6 --> H7[üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤]
    end
    
    subgraph I [Stage 3: DEPLOY]
        direction TB
        I1[Job: deploy] --> I2[üì¶ Docker: alpine]
        I2 --> I3[üîê SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ]
        I3 --> I4[üì§ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤]
        I4 --> I5[üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è]
        I5 --> I6[üåê Environment update]
    end
    
    F --> G
    G --> H
    H --> I
    
    I --> J[üìù Pipeline –∑–∞–≤–µ—Ä—à–µ–Ω]
    
    J --> K[‚úÖ SUCCESS]
    J --> L[‚ùå FAILED]
    J --> M[‚ö†Ô∏è MANUAL]
    
    K --> N[üìß –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞]
    L --> N
    M --> O[‚è∏Ô∏è –û–∂–∏–¥–∞–Ω–∏–µ —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞]
    
    %% –°–≤—è–∑–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
    G3 -.-> P[üíΩ Cache Storage]
    H3 -.-> Q[üêò PostgreSQL Service]
    H4 -.-> R[üî¥ Redis Service]
    I4 -.-> S[‚òÅÔ∏è Production Server]
    
    style A fill:#ffeb3b
    style B fill:#e3f2fd
    style G fill:#e8f5e8
    style H fill:#fff3e0
    style I fill:#ffebee
    style J fill:#f3e5f5
    style K fill:#c8e6c9
    style L fill:#ffcdd2
    style M fill:#fff9c4
```


### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:

- **Cache**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- **Artifacts**: –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏
- **Services**: –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Environments**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏ –¥–µ–ø–ª–æ—è

