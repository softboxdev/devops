# –ó–∞—â–∏—Ç–∞ Control Plane –∫–ª–∞—Å—Ç–µ—Ä–∞ Kubernetes: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Control Plane?

### 1.1 –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–æ–≥–∏—è: "–ú–æ–∑–≥" –∫–ª–∞—Å—Ç–µ—Ä–∞

**Control Plane** - —ç—Ç–æ **—É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Ü–µ–Ω—Ç—Ä** –≤—Å–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kubernetes. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ:

- üéÆ **Control Plane = –î–∏—Å–ø–µ—Ç—á–µ—Ä—Å–∫–∞—è —Ç–∞–∫—Å–∏**
- üöó **Worker Nodes = –¢–∞–∫—Å–∏ –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö**
- üë• **Pods = –ü–∞—Å—Å–∞–∂–∏—Ä—ã –≤ —Ç–∞–∫—Å–∏**

**–î–∏—Å–ø–µ—Ç—á–µ—Ä—Å–∫–∞—è (Control Plane):**
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑—ã (—Å–æ–∑–¥–∞–Ω–∏–µ Pods)
- –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∞–∫—Å–∏ –ø–æ –∑–∞–∫–∞–∑–∞–º (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Pods –ø–æ Nodes)
- –°–ª–µ–¥–∏—Ç –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ç–∞–∫—Å–∏ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Nodes)
- –•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–∞—Ö (etcd)

### 1.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Control Plane

```
Control Plane —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:
‚îú‚îÄ‚îÄ kube-apiserver - "–í—Ö–æ–¥–Ω–∞—è –¥–≤–µ—Ä—å" –∫–ª–∞—Å—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ etcd - "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö" –∫–ª–∞—Å—Ç–µ—Ä–∞  
‚îú‚îÄ‚îÄ kube-scheduler - "–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é"
‚îú‚îÄ‚îÄ kube-controller-manager - "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"
‚îî‚îÄ‚îÄ cloud-controller-manager - "–ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä —Å –æ–±–ª–∞–∫–æ–º"
```

## 2. –ü–æ—á–µ–º—É –∑–∞—â–∏—Ç–∞ Control Plane –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞?

### 2.1 –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ Control Plane

–ï—Å–ª–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ Control Plane:

- ‚úÖ **–ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å –õ–Æ–ë–´–ï —Ä–µ—Å—É—Ä—Å—ã**
- ‚úÖ **–ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –õ–Æ–ë–´–ï —Å–µ–∫—Ä–µ—Ç—ã (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏)**
- ‚úÖ **–ú–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
- ‚úÖ **–ú–æ–∂–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –í–ï–°–¨ –∫–ª–∞—Å—Ç–µ—Ä**
- ‚úÖ **–ú–æ–∂–µ—Ç —É–∫—Ä–∞—Å—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**

### 2.2 –†–µ–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏

```bash
# –ü—Ä–∏–º–µ—Ä: —á—Ç–æ –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫
kubectl get secrets --all-namespaces          # –£–∫—Ä–∞—Å—Ç—å –≤—Å–µ –ø–∞—Ä–æ–ª–∏
kubectl delete all --all --all-namespaces     # –£–¥–∞–ª–∏—Ç—å –≤—Å—ë –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
kubectl create pod --image=malware/backdoor   # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–æ–¥
```

## 3. –û—Å–Ω–æ–≤–Ω—ã–µ —É–≥—Ä–æ–∑—ã Control Plane

### 3.1 –°–µ—Ç–µ–≤—ã–µ –∞—Ç–∞–∫–∏
- **–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø** –∫ API Server
- **–ê—Ç–∞–∫–∏ —Ç–∏–ø–∞ Man-in-the-Middle**
- **DDoS –∞—Ç–∞–∫–∏** –Ω–∞ API endpoints

### 3.2 –ê—Ç–∞–∫–∏ –Ω–∞ etcd
- **–ö—Ä–∞–∂–∞ –¥–∞–Ω–Ω—ã—Ö** –∏–∑ –±–∞–∑—ã etcd
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –∫–ª–∞—Å—Ç–µ—Ä–∞
- **–£–¥–∞–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö**

### 3.3 –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **–°–ª–∞–±—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
- **–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã** –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

## 4. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ä—ã –∑–∞—â–∏—Ç—ã

### 4.1 –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è

#### 4.1.1 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ API Server
```bash
# –ü–õ–û–•–û: API Server –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
kube-apiserver --bind-address=0.0.0.0

# –•–û–†–û–®–û: API Server –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç–∏
kube-apiserver --bind-address=192.168.1.100
```

#### 4.1.2 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Private Networks
```yaml
# –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–±–ª–∞–∫–µ (AWS VPC)
Network:
  VPC CIDR: 10.0.0.0/16
  Public Subnet: 10.0.1.0/24    # –î–ª—è Load Balancers
  Private Subnet: 10.0.2.0/24   # –î–ª—è Control Plane
  Data Subnet: 10.0.3.0/24      # –î–ª—è Worker Nodes
```

### 4.2 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

#### 4.2.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RBAC
```yaml
# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cluster-admin-limited
rules:
- apiGroups: [""]
  resources: ["*"]
  verbs: ["get", "list", "watch"]
- apiGroups: ["*"]
  resources: ["*"]
  verbs: ["get", "list", "watch"]
```

#### 4.2.2 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Service Accounts
```yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: safe-application
  namespace: production
automountServiceAccountToken: false  # –í–∞–∂–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```

### 4.3 –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

#### 4.3.1 –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ etcd
```yaml
# –°–æ–∑–¥–∞–Ω–∏–µ EncryptionConfig
apiVersion: apiserver.config.k8s.io/v1
kind: EncryptionConfiguration
resources:
  - resources:
    - secrets
    providers:
    - aescbc:
        keys:
        - name: key1
          secret: <base64-encoded-secret>
    - identity: {}  # –†–µ–∑–µ—Ä–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
```

#### 4.3.2 –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤ rest
```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
kube-apiserver --encryption-provider-config=/etc/kubernetes/encryption-config.yaml
```

### 4.4 –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

#### 4.4.1 –ü–æ–ª–∏—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
kubectl version --short

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –í–µ—Ä—Å–∏—è      ‚îÇ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1.28        ‚îÇ –î–æ —Å–µ–Ω—Ç—è–±—Ä—è 2024            ‚îÇ
‚îÇ 1.27        ‚îÇ –î–æ –∏—é–ª—è 2024                ‚îÇ
‚îÇ 1.26        ‚îÇ –î–æ –∞–ø—Ä–µ–ª—è 2024              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## 5. –ó–∞—â–∏—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Control Plane

### 5.1 kube-apiserver –∑–∞—â–∏—Ç–∞

#### 5.1.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–ª–∞–≥–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```bash
# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API Server
kube-apiserver \
  --anonymous-auth=false \                    # –û—Ç–∫–ª—é—á–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø
  --authorization-mode=Node,RBAC \           # –í–∫–ª—é—á–∏—Ç—å RBAC
  --enable-admission-plugins=PodSecurityPolicy \  # –ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  --audit-log-path=/var/log/audit.log \      # –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
  --audit-log-maxage=30 \                    # –•—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ 30 –¥–Ω–µ–π
  --tls-cert-file=/path/to/cert.crt \        # TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
  --tls-private-key-file=/path/to/cert.key
```

### 5.2 etcd –∑–∞—â–∏—Ç–∞

#### 5.2.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ etcd
```bash
# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è etcd
etcd \
  --client-cert-auth=true \                  # –¢—Ä–µ–±–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
  --auto-tls=false \                         # –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-TLS
  --peer-client-cert-auth=true \             # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É etcd —É–∑–ª–∞–º–∏
  --trusted-ca-file=/path/to/ca.crt \        # –î–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ CA
  --cert-file=/path/to/server.crt \          # –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–µ—Ä–≤–µ—Ä–∞
  --key-file=/path/to/server.key             # –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
```

### 5.3 kube-controller-manager –∏ kube-scheduler

#### 5.3.1 –ó–∞—â–∏—Ç–∞ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```bash
# kube-controller-manager
kube-controller-manager \
  --use-service-account-credentials=true \   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Accounts
  --root-ca-file=/path/to/ca.crt \           # –ö–æ—Ä–Ω–µ–≤–æ–π CA
  --service-account-private-key-file=/path/to/sa.key

# kube-scheduler  
kube-scheduler \
  --bind-address=127.0.0.1 \                 # –¢–æ–ª—å–∫–æ localhost
  --leader-elect=true                        # –í—ã–±–æ—Ä –ª–∏–¥–µ—Ä–∞ –¥–ª—è HA
```

## 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞—É–¥–∏—Ç

### 6.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É–¥–∏—Ç–∞
```yaml
apiVersion: audit.k8s.io/v1
kind: Policy
rules:
- level: Metadata                         # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  namespaces: ["kube-system"]             # –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º namespace
  verbs: ["delete", "create", "update"]   # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
  resources:
  - group: ""                             # Core API group
    resources: ["secrets", "configmaps"]
```

### 6.2 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–Ω–æ–º–∞–ª–∏–π
```yaml
# –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Falco (runtime security)
- rule: Unexpected K8s NodePort Connection
  desc: Detect connections to NodePort services from outside expected ranges
  condition: >
    evt.type=connect and evt.dir=< and 
    (fd.sport=30000-32767 or fd.sport=20000-20050)
  output: >
    Unexpected connection to K8s NodePort (fd.sport=%fd.sport)
  priority: WARNING
```

## 7. Backup –∏ Disaster Recovery

### 7.1 –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ etcd
```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç backup etcd

ETCDCTL_API=3 etcdctl \
  --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/etcd/server.crt \
  --key=/etc/kubernetes/pki/etcd/server.key \
  snapshot save /backup/etcd-snapshot-$(date +%Y%m%d).db
```

### 7.2 –ü–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ snapshot
ETCDCTL_API=3 etcdctl snapshot restore /backup/etcd-snapshot.db \
  --data-dir /var/lib/etcd-from-backup
```

## 8. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 8.1 kube-bench (CIS Benchmark)
```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
docker run --rm --pid=host -v /etc:/etc:ro -v /var:/var:ro \
  aquasec/kube-bench:latest run --targets master

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
cat results/master.json | jq '.tests[].results[] | select(.status == "FAIL")'
```

### 8.2 kube-hunter
```bash
# –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
kube-hunter --remote <control-plane-ip>

# –ü–∞—Å—Å–∏–≤–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
kube-hunter --passive
```

## 9. Best Practices –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

### 9.1 "–ù–µ –Ω–∞–≤—Ä–µ–¥–∏" - –±–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **‚úÖ –ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ API Server –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç**
2. **‚úÖ –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ RBAC**
3. **‚úÖ –†–ï–ì–£–õ–Ø–†–ù–û –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä**
4. **‚úÖ –®–ò–§–†–£–ô–¢–ï —Å–µ–∫—Ä–µ—Ç—ã –≤ etcd**
5. **‚úÖ –ù–ê–°–¢–†–ê–ò–í–ê–ô–¢–ï –∞—É–¥–∏—Ç –≤–∞–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π**

### 9.2 –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```markdown
- [ ] API Server –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∏–∑ trusted networks
- [ ] RBAC –≤–∫–ª—é—á–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] etcd –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –∑–∞—â–∏—â–µ–Ω
- [ ] –†–µ–≥—É–ª—è—Ä–Ω—ã–µ backup etcd
- [ ] –í–∫–ª—é—á–µ–Ω –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [ ] TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤–∞–ª–∏–¥–Ω—ã
- [ ] –ö–ª–∞—Å—Ç–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
- [ ] Network policies –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Pod security policies –≤–∫–ª—é—á–µ–Ω—ã
```

## 10. –ü—Ä–∏–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 10.1 –¢–∏–ø–æ–≤–∞—è —Å—Ö–µ–º–∞ –¥–ª—è production
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    INTERNET                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 Load Balancer (Public)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 Bastion Host / VPN                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 PRIVATE NETWORK                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ Control     ‚îÇ  ‚îÇ Control     ‚îÇ  ‚îÇ Control     ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ Plane 1     ‚îÇ  ‚îÇ Plane 2     ‚îÇ  ‚îÇ Plane 3     ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ 10.0.1.10   ‚îÇ  ‚îÇ 10.0.1.11   ‚îÇ  ‚îÇ 10.0.1.12   ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ           ‚îÇ              ‚îÇ              ‚îÇ                  ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ                          ‚îÇ                                 ‚îÇ
‚îÇ                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ                 ‚îÇ   Load Balancer ‚îÇ                        ‚îÇ
‚îÇ                 ‚îÇ   (Internal)    ‚îÇ                        ‚îÇ
‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ó–∞—â–∏—Ç–∞ Control Plane - —ç—Ç–æ **—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** –≤—Å–µ–≥–æ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–∞. –ù–∞—á–Ω–∏—Ç–µ —Å –±–∞–∑–æ–≤—ã—Ö –º–µ—Ä:

1. **–°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è** - —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –ø–µ—Ä–≤—ã–π —à–∞–≥
2. **RBAC** - –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
3. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** - –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –∑–∞–∫—Ä—ã—Ç–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É–≥—Ä–æ–∑

–ü–æ–º–Ω–∏—Ç–µ: –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –∞ –Ω–µ —Ä–∞–∑–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∏ —É–ª—É—á—à–∞–π—Ç–µ –∑–∞—â–∏—Ç—É –≤–∞—à–µ–≥–æ Control Plane.